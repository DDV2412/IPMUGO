<template>
  <section
    class="transition-all duration-300 ease-in-out pt-16 pb-12 bg-ipmugo-neutral-100/30 dark:bg-ipmugo-neutral-10/30 backdrop-blur-sm"
  >
    <div class="absolute top-0 right-0">
      <svg
        width="1269"
        height="724"
        viewBox="0 0 1269 724"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_71_1201)">
          <mask
            id="mask0_71_1201"
            style="mask-type: luminance"
            maskUnits="userSpaceOnUse"
            x="0"
            y="0"
            width="1269"
            height="724"
          >
            <path d="M1269 724H0V0H1269V724Z" fill="white" />
          </mask>
          <g mask="url(#mask0_71_1201)">
            <g opacity="0.8" filter="url(#filter0_f_71_1201)">
              <mask
                id="mask1_71_1201"
                style="mask-type: alpha"
                maskUnits="userSpaceOnUse"
                x="99"
                y="120"
                width="1812"
                height="551"
              >
                <path
                  d="M99.7519 638.036C80.5135 566.237 470.202 399.437 970.146 265.478C1470.09 131.519 1890.97 81.1273 1910.21 152.926C1929.45 224.725 1539.76 391.525 1039.81 525.484C539.871 659.444 118.99 709.835 99.7519 638.036Z"
                  fill="#C4C4C4"
                />
              </mask>
              <g mask="url(#mask1_71_1201)">
                <g
                  style="mix-blend-mode: multiply"
                  opacity="0.4"
                  filter="url(#filter1_f_71_1201)"
                >
                  <path
                    d="M382.494 562.63C358.52 473.156 607.417 328.723 938.422 240.031C1269.43 151.338 1557.2 151.972 1581.17 241.446C1605.14 330.92 1356.25 475.352 1025.24 564.045C694.237 652.738 406.469 652.104 382.494 562.63Z"
                    fill="url(#paint0_linear_71_1201)"
                  />
                </g>
              </g>
            </g>
            <g opacity="0.8" filter="url(#filter2_f_71_1201)">
              <mask
                id="mask2_71_1201"
                style="mask-type: alpha"
                maskUnits="userSpaceOnUse"
                x="57"
                y="-208"
                width="1761"
                height="539"
              >
                <path
                  d="M58.5423 296.934C39.3039 225.135 417.207 61.4932 902.613 -68.5709C1388.02 -198.635 1797.11 -245.868 1816.35 -174.07C1835.59 -102.271 1457.69 61.3711 972.281 191.435C486.876 321.499 77.7807 368.733 58.5423 296.934Z"
                  fill="#C4C4C4"
                />
              </mask>
              <g mask="url(#mask2_71_1201)">
                <g
                  style="mix-blend-mode: multiply"
                  opacity="0.4"
                  filter="url(#filter3_f_71_1201)"
                >
                  <path
                    d="M315.494 228.63C291.52 139.156 540.417 -5.27653 871.422 -93.9691C1202.43 -182.662 1490.2 -182.028 1514.17 -92.554C1538.14 -3.08002 1289.25 141.352 958.242 230.045C627.237 318.738 339.469 318.104 315.494 228.63Z"
                    fill="url(#paint1_linear_71_1201)"
                  />
                </g>
              </g>
            </g>
            <g opacity="0.8" filter="url(#filter4_f_71_1201)">
              <mask
                id="mask3_71_1201"
                style="mask-type: alpha"
                maskUnits="userSpaceOnUse"
                x="-165"
                y="-118"
                width="2287"
                height="666"
              >
                <path
                  d="M-163.878 520.868C-183.117 449.069 312.762 253.816 943.698 84.757C1574.63 -84.3017 2101.7 -163.146 2120.94 -91.3478C2140.18 -19.5491 1644.3 175.704 1013.37 344.763C382.431 513.822 -144.64 592.667 -163.878 520.868Z"
                  fill="#C4C4C4"
                />
              </mask>
              <g mask="url(#mask3_71_1201)">
                <g
                  style="mix-blend-mode: multiply"
                  opacity="0.4"
                  filter="url(#filter5_f_71_1201)"
                >
                  <path
                    d="M356.494 381.63C332.52 292.156 581.417 147.723 912.422 59.0309C1243.43 -29.6616 1531.2 -29.028 1555.17 60.446C1579.14 149.92 1330.25 294.352 999.242 383.045C668.237 471.738 380.469 471.104 356.494 381.63Z"
                    fill="url(#paint2_linear_71_1201)"
                  />
                </g>
              </g>
            </g>
          </g>
        </g>
        <defs>
          <filter
            id="filter0_f_71_1201"
            x="342.302"
            y="135.328"
            width="1279.06"
            height="533.42"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="19.2978"
              result="effect1_foregroundBlur_71_1201"
            />
          </filter>
          <filter
            id="filter1_f_71_1201"
            x="289.801"
            y="82.8274"
            width="1384.06"
            height="638.421"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="45.5482"
              result="effect1_foregroundBlur_71_1201"
            />
          </filter>
          <filter
            id="filter2_f_71_1201"
            x="263.898"
            y="-210.076"
            width="1301.87"
            height="556.228"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="25"
              result="effect1_foregroundBlur_71_1201"
            />
          </filter>
          <filter
            id="filter3_f_71_1201"
            x="199.54"
            y="-274.434"
            width="1430.58"
            height="684.944"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="57.1788"
              result="effect1_foregroundBlur_71_1201"
            />
          </filter>
          <filter
            id="filter4_f_71_1201"
            x="316.302"
            y="-45.6718"
            width="1279.06"
            height="533.42"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="19.2978"
              result="effect1_foregroundBlur_71_1201"
            />
          </filter>
          <filter
            id="filter5_f_71_1201"
            x="263.801"
            y="-98.1726"
            width="1384.06"
            height="638.421"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="45.5482"
              result="effect1_foregroundBlur_71_1201"
            />
          </filter>
          <linearGradient
            id="paint0_linear_71_1201"
            x1="938.422"
            y1="240.031"
            x2="-399.26"
            y2="598.462"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#1D4ED8" />
            <stop offset="0.225209" stop-color="#1D4ED8" />
            <stop offset="1" stop-color="#1D4ED8" stop-opacity="0" />
          </linearGradient>
          <linearGradient
            id="paint1_linear_71_1201"
            x1="871.422"
            y1="-93.9691"
            x2="-466.26"
            y2="264.462"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#1D4ED8" />
            <stop offset="0.225209" stop-color="#1D4ED8" />
            <stop offset="1" stop-color="#1D4ED8" stop-opacity="0" />
          </linearGradient>
          <linearGradient
            id="paint2_linear_71_1201"
            x1="912.422"
            y1="59.0309"
            x2="-425.26"
            y2="417.462"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#1D4ED8" />
            <stop offset="0.225209" stop-color="#1D4ED8" />
            <stop offset="1" stop-color="#1D4ED8" stop-opacity="0" />
          </linearGradient>
          <clipPath id="clip0_71_1201">
            <rect width="1269" height="724" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </div>
    <div
      class="min-h-screen bg-ipmugo-neutral-100/30 dark:bg-ipmugo-neutral-10/30 backdrop-blur-sm min-w-full transition-all duration-300 ease-in-out"
    >
      <div class="container z-10 px-4 mx-auto lg:py-8">
        <!-- Hero banner -->
        <div
          class="grid pt-24 pb-12 grid-cols-1 lg:grid-cols-2 gap-4 items-center overflow-hidden rounded-md"
        >
          <div>
            <h1
              class="text-h1 leading-h1 font-bold text-ipmugo-neutral-10 dark:text-ipmugo-neutral-100"
            >
              {{ journal.name }}
            </h1>
            <p
              class="text-p-18 leading-p-18 mt-4 text-ipmugo-neutral-10 dark:text-ipmugo-neutral-100"
            >
              ISSN/E_ISSN : {{ journal.issn }}/{{ journal.e_issn }}
            </p>
            <p
              class="text-p-18 leading-p-18 mt-4 text-ipmugo-neutral-10 dark:text-ipmugo-neutral-100"
            >
              Pubsliher : {{ journal.publisher }}
            </p>

            <div class="mt-8 flex justify-start items-center gap-5">
              <a
                :href="journal.journalSite"
                typeData="button"
                class="bg-ipmugo-primary-50 overflow-hidden h-12 px-5 rounded-md relative transition-all duration-300 ease-in-out font-medium text-l-16 leading-l-16 flex justify-center items-center text-ipmugo-neutral-90 before:content-[''] before:z-[1] before:absolute before:h-full before:rounded-md before:w-0 hover:before:w-full before:transition-all before:duration-300 before:ease-in-out before:bg-ipmugo-neutral-90 before:ring-2 before:ring-inset before:ring-ipmugo-neutral-80 after:content-['View Journal'] after:justify-center after:items-center after:z-[2] after:absolute after:text-ipmugo-neutral-10 after:w-full after:h-full after:flex after:opacity-0 hover:after:opacity-100 after:transition-all after:duration-300 after:ease-in-out"
                >View Journal</a
              >
            </div>
          </div>
          <div
            class="md:flex row-start-1 lg:row-start-auto justify-center items-center min-w-full min-h-full"
          >
            <img
              src="/images/03  IJPEDS 2022.jpg"
              alt=""
              class="w-72 rounded-md cursor-pointer h-auto mx-auto"
            />
          </div>
        </div>

        <div class="py-8">
          <article class="py-2" v-html="journal.description"></article>
        </div>

        <!-- Subscribe -->
        <div class="py-12 transition-all duration-300 ease-in-out">
          <h1
            class="text-h4 md:text-h3 lg:text-h2 leading-h4 md:leading-h3 lg:leading-h2 font-semibold pb-4 text-ipmugo-neutral-10 dark:text-ipmugo-neutral-100"
          >
            Digital Library
            <span class="text-ipmugo-primary-50">Community</span>
          </h1>
          <p
            class="text-p-16 leading-p-16 md:w-[80%] text-ipmugo-neutral-10 dark:text-ipmugo-neutral-100"
          >
            Our digital library boasts thousands of daily visitors accessing
            expertly written articles from our growing collection, and hundreds
            of thousands of monthly downloads. Join us in building a better
            digital library for all.
          </p>
          <div
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 pt-12"
          >
            <div
              class="min-w-full p-4 h-40 rounded-md ring-1 ring-ipmugo-neutral-90 dark:ring-ipmugo-neutral-20 cursor-pointer flex flex-col justify-center items-start relative overflow-hidden bg-ipmugo-primary-50"
            >
              <p
                class="text-h1 leading-h1 font-semibold text-ipmugo-neutral-100"
              >
                {{ articleCount }}
              </p>
              <p class="font-semibold text-ipmugo-neutral-80">Article Counts</p>
              <div class="absolute h-full right-0 text-ipmugo-neutral-90/30">
                <svg
                  class="w-full h-full"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M14 2.26953V6.40007C14 6.96012 14 7.24015 14.109 7.45406C14.2049 7.64222 14.3578 7.7952 14.546 7.89108C14.7599 8.00007 15.0399 8.00007 15.6 8.00007H19.7305M16 13H8M16 17H8M10 9H8M14 2H8.8C7.11984 2 6.27976 2 5.63803 2.32698C5.07354 2.6146 4.6146 3.07354 4.32698 3.63803C4 4.27976 4 5.11984 4 6.8V17.2C4 18.8802 4 19.7202 4.32698 20.362C4.6146 20.9265 5.07354 21.3854 5.63803 21.673C6.27976 22 7.11984 22 8.8 22H15.2C16.8802 22 17.7202 22 18.362 21.673C18.9265 21.3854 19.3854 20.9265 19.673 20.362C20 19.7202 20 18.8802 20 17.2V8L14 2Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
            </div>
            <div
              class="min-w-full p-4 h-40 rounded-md ring-1 ring-ipmugo-neutral-90 dark:ring-ipmugo-neutral-20 cursor-pointer flex flex-col justify-center items-start relative overflow-hidden bg-ipmugo-primary-50"
            >
              <p
                class="text-h1 leading-h1 font-semibold text-ipmugo-neutral-100"
              >
                {{ authorCount }}
              </p>
              <p class="font-semibold text-ipmugo-neutral-80">Author Counts</p>
              <div class="absolute h-full right-0 text-ipmugo-neutral-90/30">
                <svg
                  class="w-full h-full"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M16 3.46776C17.4817 4.20411 18.5 5.73314 18.5 7.5C18.5 9.26686 17.4817 10.7959 16 11.5322M18 16.7664C19.5115 17.4503 20.8725 18.565 22 20M2 20C3.94649 17.5226 6.58918 16 9.5 16C12.4108 16 15.0535 17.5226 17 20M14 7.5C14 9.98528 11.9853 12 9.5 12C7.01472 12 5 9.98528 5 7.5C5 5.01472 7.01472 3 9.5 3C11.9853 3 14 5.01472 14 7.5Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
            </div>
            <div
              class="min-w-full p-4 h-40 rounded-md ring-1 ring-ipmugo-neutral-90 dark:ring-ipmugo-neutral-20 cursor-pointer flex flex-col justify-center items-start relative overflow-hidden bg-ipmugo-primary-50"
            >
              <p
                class="text-h1 leading-h1 font-semibold text-ipmugo-neutral-100"
              >
                {{ viewCount }}
              </p>
              <p class="font-semibold text-ipmugo-neutral-80">View Counts</p>
              <div class="absolute h-full right-0 text-ipmugo-neutral-90/30">
                <svg
                  class="w-full h-full"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.42012 12.7132C2.28394 12.4975 2.21584 12.3897 2.17772 12.2234C2.14909 12.0985 2.14909 11.9015 2.17772 11.7766C2.21584 11.6103 2.28394 11.5025 2.42012 11.2868C3.54553 9.50484 6.8954 5 12.0004 5C17.1054 5 20.4553 9.50484 21.5807 11.2868C21.7169 11.5025 21.785 11.6103 21.8231 11.7766C21.8517 11.9015 21.8517 12.0985 21.8231 12.2234C21.785 12.3897 21.7169 12.4975 21.5807 12.7132C20.4553 14.4952 17.1054 19 12.0004 19C6.8954 19 3.54553 14.4952 2.42012 12.7132Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M12.0004 15C13.6573 15 15.0004 13.6569 15.0004 12C15.0004 10.3431 13.6573 9 12.0004 9C10.3435 9 9.0004 10.3431 9.0004 12C9.0004 13.6569 10.3435 15 12.0004 15Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
            </div>
            <div
              class="min-w-full p-4 h-40 rounded-md ring-1 ring-ipmugo-neutral-90 dark:ring-ipmugo-neutral-20 cursor-pointer flex flex-col justify-center items-start relative overflow-hidden bg-ipmugo-primary-50"
            >
              <p
                class="text-h1 leading-h1 font-semibold text-ipmugo-neutral-100"
              >
                {{ downloadCount }}
              </p>
              <p class="font-semibold text-ipmugo-neutral-80">
                Download Counts
              </p>
              <div class="absolute h-full right-0 text-ipmugo-neutral-90/30">
                <svg
                  class="w-full h-full"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M4 16.2422C2.79401 15.435 2 14.0602 2 12.5C2 10.1564 3.79151 8.23129 6.07974 8.01937C6.54781 5.17213 9.02024 3 12 3C14.9798 3 17.4522 5.17213 17.9203 8.01937C20.2085 8.23129 22 10.1564 22 12.5C22 14.0602 21.206 15.435 20 16.2422M8 17L12 21M12 21L16 17M12 21V12"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
            </div>
          </div>
          <p
            class="text-l-14 leading-l-14 py-8 text-center text-ipmugo-neutral-10 dark:text-ipmugo-neutral-100"
          >
            Stay up-to-date with our newsletter to receive the latest releases
            and news about our IPMUGO Digital Library and its ecosystem
          </p>
          <form
            @submit.prevent="subscribeHandler"
            class="flex justify-center items-start gap-4"
          >
            <div>
              <input
                placeholder="Email"
                type="email"
                v-model="subscribe"
                class="px-4 ring-2 h-11 border-none focus:ring-ipmugo-primary-70 dark:focus:ring-ipmugo-primary-30 focus:ring-2 ring-inset ring-ipmugo-primary-90 dark:ring-ipmugo-primary-20 rounded-md outline-none text-l-14 leading-l-14 text-ipmugo-neutral-10 dark:text-ipmugo-neutral-100 bg-ipmugo-neutral-100 dark:bg-ipmugo-neutral-10"
              />
            </div>
            <button
              class="h-11 flex justify-center items-center gap-x-3 bg-ipmugo-primary-50 text-ipmugo-neutral-100 rounded-md max-w-max px-4 cursor-pointer"
            >
              Subscribe
            </button>
          </form>
          <p
            v-if="error"
            class="text-l-14 text-center leading-l-14 font-medium mt-2 text-ipmugo-danger-50"
          >
            {{ error }}
          </p>
          <p
            v-if="success"
            class="text-l-14 text-center leading-l-14 font-medium mt-2 text-ipmugo-success-50"
          >
            {{ success }}
          </p>
        </div>
      </div>
    </div>
  </section>
</template>
<script lang="ts">
import Vue from 'vue'

export default Vue.extend({
  layout: 'default',
  data: () => ({
    subscribe: '',
    error: '',
    success: '',
    loading: false,
    journal: {} as any,
    articleCount: 0,
    authorCount: 0,
    viewCount: 0,
    downloadCount: 0,
  }),
  methods: {
    async subscribeHandler() {
      this.loading = true
      try {
        const data = await this.$axios.post('/api/subscribe', {
          email: this.subscribe,
        })

        if (data && data.data && data.data.messages) {
          this.success =
            'We hope you can enjoy the benefits of your subscription'
        }
      } catch (error: any) {
        this.error =
          'Please try again later or contact customer support for assistance.'
      } finally {
        this.loading = false
      }
    },
    async journalDetail() {
      const data = await this.$axios.get(
        `/api/journal/${this.$route.params.abbreviation}`
      )

      if (data && data.data && data.data.data) {
        this.journal = data.data.data
      }
    },
    async statisticData() {
      const data = await this.$axios.get('/api/article/statistic')

      if (data && data.data && data.data.data) {
        if (data.data.data.articleCount) {
          this.articleCount = data.data.data.articleCount
        }
        if (data.data.data.authorCount) {
          this.authorCount = data.data.data.authorCount
        }
      }
    },
    async viewData() {
      const data = await this.$axios.get('/api/set-counter/View')

      if (data && data.data && data.data.data) {
        this.viewCount = data.data.data
      }
    },
    async downloadData() {
      const data = await this.$axios.get('/api/set-counter/Download')

      if (data && data.data && data.data.data) {
        this.downloadCount = data.data.data
      }
    },
  },
  async mounted() {
    await this.journalDetail()

    await this.statisticData()

    await this.viewData()

    await this.downloadData()
  },
})
</script>
